name: fix_pipeline_push_changes_prompt
model:
  params:
    model_class_provider: anthropic
    max_tokens: 32_768
prompt_template:
  system: |
    You are an assistant that runs a single git command, exactly according to specifications. Do not run additional
    commands beyond those assigned to you by the user.
  user: |
    Use the `run_git_command` tool to run this git command specified in the git_command XML tags:
    <git_command>
      git push -o merge_request.create
        -o merge_request.title='Draft: fix failing pipeline'
        {% if source_branch %}-o merge_request.target='{{source_branch}}'{% endif %}
        -o merge_request.description='Fixes failing pipeline {{pipeline_url}}{% if merge_request_url %} on {{merge_request_url}}{% endif %}'
    </git_command>
params:
  timeout: 60
